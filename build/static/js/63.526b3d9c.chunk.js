(this["webpackJsonpmain-bt5"]=this["webpackJsonpmain-bt5"]||[]).push([[63,177],{1056:function(e,t,n){},141:function(e,t,n){"use strict";var c=n(63),s=n(12),a=n(58),i=n(3);t.a=function(e){var t=Object(s.f)(),n=t.pathname.split("/")[1],r=t.pathname.split("/")[2];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h4",{children:e.heading}),Object(i.jsxs)(c.c,{children:[Object(i.jsx)(c.d,{to:"/",tag:a.b,className:"text-decoration-none",children:"Home"}),n?Object(i.jsx)(c.d,{active:!0,children:n}):"",r?Object(i.jsx)(c.d,{active:!0,children:r}):""]})]})}},143:function(e,t,n){"use strict";var c=n(158);n(184);t.a=function(e,t){return"success"===t?c.b.success(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"error"===t?c.b.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"info"===t?c.b.info(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"warning"===t?c.b.warning(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):Object(c.b)(e)}},1463:function(e,t,n){"use strict";n.r(t);var c=n(11),s=n(2),a=n(9),i=n(27),r=n(1),o=n(12),d=n(63),j=(n(274),n(269),n(158)),l=n(141),u=n(147),b=n(143),h=n(7),O=n(3);function f(e){var t=e.staffeditdetails,n=e.handleInputs,c=Object(r.useState)([]),s=Object(i.a)(c,2),a=s[0],o=s[1];return Object(r.useEffect)((function(){h.a.get("/score/getCustomerName").then((function(e){o(e.data.data)})).catch((function(){Object(b.a)("Company not found","info")}))}),[]),Object(O.jsx)(d.A,{children:Object(O.jsx)(d.C,{children:Object(O.jsx)(u.default,{title:"Staff Details",creationModificationDate:t,children:Object(O.jsxs)(d.eb,{children:[Object(O.jsx)(d.s,{md:"3",children:Object(O.jsxs)(d.C,{children:[Object(O.jsxs)(d.H,{children:["Score ",Object(O.jsx)("span",{className:"required",children:" *"})]}),Object(O.jsx)(d.E,{type:"text",onChange:n,value:t&&t.correct_count,name:"score",disabled:!0})]})}),Object(O.jsx)(d.s,{md:"3",children:Object(O.jsxs)(d.C,{children:[Object(O.jsx)(d.H,{children:"Comments"}),Object(O.jsx)(d.E,{type:"text",onChange:n,value:t&&t.comments,name:"comments"})]})}),Object(O.jsx)(d.s,{md:"3",children:Object(O.jsxs)(d.C,{children:[Object(O.jsx)(d.H,{children:"Status"}),Object(O.jsxs)(d.E,{type:"select",name:"review_status",onChange:n,value:t&&t.review_status,children:[Object(O.jsx)("option",{value:"",children:"Please Select"}),Object(O.jsx)("option",{value:"Current",children:"Current"}),Object(O.jsx)("option",{value:"Archive",children:"Archive"})]})]})}),Object(O.jsx)(d.s,{md:"3",children:Object(O.jsxs)(d.C,{children:[Object(O.jsx)(d.H,{children:"Company"}),Object(O.jsxs)(d.E,{type:"select",name:"company_id",onChange:n,value:t&&t.company_id,children:[Object(O.jsx)("option",{value:"",children:"Please Select"}),a&&a.map((function(e){return Object(O.jsx)("option",{value:e.company_id,children:e.company_name},e.company_id)}))]})]})}),Object(O.jsx)(d.s,{md:"3",children:Object(O.jsxs)(d.C,{children:[Object(O.jsx)(d.H,{children:"Reviewer"}),Object(O.jsx)(d.E,{type:"text",onChange:n,value:t&&t.reviewer,name:"reviewer"})]})})]})})})})}var x=n(270);function m(e){var t=e.applyChanges,n=e.backToList,c=e.editStaffData,s=e.navigate;return Object(O.jsx)(d.A,{children:Object(O.jsx)(d.C,{children:Object(O.jsx)(x.a,{children:Object(O.jsxs)(d.eb,{children:[Object(O.jsx)(d.s,{children:Object(O.jsx)(d.e,{className:"shadow-none",color:"primary",onClick:function(){c(),setTimeout((function(){s("/ScoreManagement")}),1100)},children:"Save"})}),Object(O.jsx)(d.s,{children:Object(O.jsx)(d.e,{className:"shadow-none",color:"primary",onClick:function(){c(),t()},children:"Apply"})}),Object(O.jsx)(d.s,{children:Object(O.jsx)(d.e,{className:"shadow-none",color:"dark",onClick:function(){window.confirm("Are you sure you want to cancel  \n  \n You will lose any changes made")?s("/ScoreManagement"):t()},children:"Cancel"})}),Object(O.jsx)(d.s,{children:Object(O.jsx)(d.e,{className:"shadow-none",color:"dark",onClick:function(){n()},children:"Back to List"})})]})})})})}var p=n(204),g=n(58);function v(e){var t=e.toggle,n=e.tabs,c=Object(g.c)(),s=Object(i.a)(c,2),a=s[0],o=s[1];return Object(r.useEffect)((function(){t(a.get("tab"))}),[a.get("tab")]),Object(O.jsx)(d.R,{tabs:!0,children:null===n||void 0===n?void 0:n.map((function(e){return Object(O.jsx)(d.S,{children:Object(O.jsx)(d.T,{className:e.id===a.get("tab")?"active":"",onClick:function(){o({tab:e.id}),t(e.id)},children:e.name},e.id)},e.id)}))})}n(1056);var C=n(602),_=function(e){var t={labels:["Answered","Unanswered","Total Questions","Correct Answers"],datasets:[{label:"Counts",backgroundColor:["#36A2EB","#FF6384","#FFCE56","#4CAF50"],borderColor:"rgba(0,0,0,0.2)",borderWidth:3,hoverBackgroundColor:["#36A2EB","#FF6384","#FFCE56","#4CAF50"],hoverBorderColor:"rgba(0,0,0,0.2)",data:[e.answeredCount,e.unansweredCount,e.totalQuestion,e.correctCount]}]};return Object(O.jsxs)("div",{children:[Object(O.jsx)("h4",{children:"Score Summary"}),Object(O.jsx)(C.Doughnut,{data:t})]})};t.default=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],x=t[1],g=Object(r.useState)([]),C=Object(i.a)(g,2),y=C[0],w=C[1],S=Object(r.useState)([]),k=Object(i.a)(S,2),N=k[0],q=k[1],A=Object(r.useState)({}),F=Object(i.a)(A,2),H=F[0],E=F[1],M=Object(r.useState)({}),D=Object(i.a)(M,2),B=D[0],P=D[1],T=Object(r.useState)(1),Y=Object(i.a)(T,2),Q=Y[0],I=Y[1],Z=Object(o.h)().id,R=Object(o.g)(),L=Object(r.useState)("1"),U=Object(i.a)(L,2),z=U[0],J=U[1],W=function(){h.a.post("/score/getScoreManageById",{score_management_id:Z}).then((function(e){x(e.data.data[0])})).catch((function(){Object(b.a)("Staff Data Not Found","info")}))},X=function(){h.a.post("/score/getScoreHistory",{score_management_id:Z}).then((function(e){w(e.data.data)})).catch((function(){Object(b.a)("Score History Not Found","info")}))};Object(r.useEffect)((function(){W(),X(),h.a.get("/score/getQuestions",{params:{iso_code_id:n&&n.iso_code_id}}).then((function(e){var t=e.data.data.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{options:[e.option_1,e.option_2,e.option_3,e.option_4].filter(Boolean)})})),n=e.data.data.reduce((function(e,t){return e[t.question_id]=t.correct_answer,e}),{});q(t),P(n)})).catch((function(){Object(b.a)("Questions not found","info")})),h.a.post("/score/getScoreHistory",{score_management_id:Z}).then((function(e){var t=e.data.data.reduce((function(e,t){return e[t.question_id]=t.answer,e}),{});E(t)})).catch((function(){Object(b.a)("Previous answers not found","info")}))}),[Z,n&&n.iso_code_id]);var G=function(e,t){E((function(n){return Object(a.a)(Object(a.a)({},n),{},Object(s.a)({},e,t))}))},K=5*Q,V=K-5,$=N.slice(V,K),ee=Math.ceil(N.length/5),te=function(e){return I(e)};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(l.a,{}),Object(O.jsx)(j.a,{}),Object(O.jsx)(m,{navigate:R,saveChanges:function(){R("/ScoreManagement"),window.location.reload()},applyChanges:function(){},backToList:function(){R("/ScoreManagement")},editStaffData:function(){n.modification_date=p.a,h.a.post("/score/editScore",n).then((function(){Object(b.a)("Record edited successfully","success"),W()})).catch((function(){Object(b.a)("Unable to edit record.","error")}))},id:Z}),Object(O.jsx)(l.a,{heading:n&&n.score_management_id}),Object(O.jsx)(f,{staffeditdetails:n,handleInputs:function(e){x(Object(a.a)(Object(a.a)({},n),{},Object(s.a)({},e.target.name,e.target.value)))}}),Object(O.jsx)(d.A,{children:Object(O.jsx)(d.C,{children:Object(O.jsxs)(u.default,{title:"More Details",children:[Object(O.jsx)(j.a,{}),Object(O.jsx)(v,{toggle:function(e){J(e)},tabs:[{id:"1",name:"Score History"},{id:"2",name:"Score Sumary"}]}),Object(O.jsxs)(d.gb,{className:"p-4",activeTab:z,children:[Object(O.jsxs)(d.hb,{tabId:"1",children:[$.map((function(e){return Object(O.jsx)(d.i,{className:"mb-3",children:Object(O.jsxs)(d.j,{children:[Object(O.jsx)(d.o,{tag:"h5",children:e.question}),Object(O.jsxs)(d.n,{children:["MCQ"===e.question_type&&Array.isArray(e.options)&&e.options.length>0&&e.options.map((function(t){return Object(O.jsx)(d.C,{check:!0,children:Object(O.jsxs)(d.H,{check:!0,children:[Object(O.jsx)(d.E,{type:"checkbox",checked:H[e.question_id]===t,onChange:function(){return G(e.question_id,t)}}),t]})},t)})),"True/False"===e.question_type&&Object(O.jsxs)("div",{children:[Object(O.jsx)(d.C,{check:!0,children:Object(O.jsxs)(d.H,{check:!0,children:[Object(O.jsx)(d.E,{type:"radio",checked:"True"===H[e.question_id],onChange:function(){return G(e.question_id,"True")}}),"True"]})}),Object(O.jsx)(d.C,{check:!0,children:Object(O.jsxs)(d.H,{check:!0,children:[Object(O.jsx)(d.E,{type:"radio",checked:"False"===H[e.question_id],onChange:function(){return G(e.question_id,"False")}}),"False"]})})]}),"Objective"===e.question_type&&Object(O.jsx)(d.C,{children:Object(O.jsx)(d.E,{type:"text",value:H[e.question_id]||"",onChange:function(t){return n=e.question_id,c=t.target.value,void E((function(e){return Object(a.a)(Object(a.a)({},e),{},Object(s.a)({},n,c))}));var n,c}})})]})]})},e.question_id)})),Object(O.jsx)(d.e,{color:"primary",onClick:function(){var e=[],t=[];Object.entries(H).forEach((function(n){var c=Object(i.a)(n,2),s=c[0],r=c[1],o=Number(s),d=y.find((function(e){return e.question_id===o}));d?d.answer!==r&&e.push(Object(a.a)(Object(a.a)({},d),{},{answer:r,modification_date:new Date})):t.push({score_management_id:Z,question_id:o,answer:r,creation_date:new Date})}));var s=e.map((function(e){return h.a.post("/score/editScoreHistory",e)})),r=t.length>0?h.a.post("/score/addScoreHistory",{answers:t}):Promise.resolve();Promise.all([].concat(Object(c.a)(s),[r])).then((function(){Object(b.a)("Answers submitted successfully","success");var e=Object.keys(H).length,t=N.length-e,c=Object.entries(H).reduce((function(e,t){var n=Object(i.a)(t,2),c=n[0],s=n[1];return B[c]===s&&e++,e}),0);return h.a.post("/score/updateAnswerCounts",{score_management_id:Z,iso_code_id:n&&n.iso_code_id,total_question:N.length,answered_count:e,unanswered_count:t,correct_count:c})})).then((function(){X()})).catch((function(){Object(b.a)("Unable to submit answers.","error")}))},children:"Submit Answers"}),Object(O.jsxs)(d.X,{"aria-label":"Page navigation example",className:"mt-4",children:[Object(O.jsx)(d.Y,{disabled:1===Q,children:Object(O.jsx)(d.Z,{first:!0,onClick:function(){return te(1)}})}),Object(O.jsx)(d.Y,{disabled:1===Q,children:Object(O.jsx)(d.Z,{previous:!0,onClick:function(){return te(Q-1)}})}),Object(c.a)(Array(ee).keys()).map((function(e){return Object(O.jsx)(d.Y,{active:Q===e+1,children:Object(O.jsx)(d.Z,{onClick:function(){return te(e+1)},children:e+1})},e+1)})),Object(O.jsx)(d.Y,{disabled:Q===ee,children:Object(O.jsx)(d.Z,{next:!0,onClick:function(){return te(Q+1)}})}),Object(O.jsx)(d.Y,{disabled:Q===ee,children:Object(O.jsx)(d.Z,{last:!0,onClick:function(){return te(ee)}})})]})]}),Object(O.jsx)(d.hb,{tabId:"2",children:Object(O.jsx)(_,{answeredCount:y.length,unansweredCount:N.length-y.length,totalQuestion:N.length,correctCount:y.filter((function(e){return B[e.question_id]===e.answer})).length})})]})]})})})]})}},147:function(e,t,n){"use strict";n.r(t);var c=n(63),s=(n(1),n(3));function a(e){var t=e.details,n=void 0===t?null:t,a=e.title;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(c.o,{tag:"h4",className:"border-bottom px-4 py-3 mb-0",children:Object(s.jsxs)(c.eb,{children:[Object(s.jsx)(c.s,{children:a}),n&&Object(s.jsxs)(c.s,{children:[Object(s.jsx)(c.eb,{children:Object(s.jsxs)("span",{style:{fontSize:"0.7em"},children:[" Creation: ",n&&n.created_by," ",n&&n.creation_date]})}),Object(s.jsx)(c.eb,{className:"d-flex",children:Object(s.jsxs)("span",{style:{fontSize:"0.7em"},children:[" Modified: ",n&&n.modified_by," ",n&&n.modification_date]})})]})]})})})}t.default=function(e){var t=e.children,n=e.title,i=e.subtitle,r=e.creationModificationDate;return Object(s.jsxs)(c.i,{className:"shadow-none",children:[Object(s.jsx)(a,{details:r,title:n}),Object(s.jsxs)(c.j,{className:"p-4",children:[Object(s.jsx)(c.m,{className:"text-muted mb-3",children:i||""}),Object(s.jsx)("div",{children:t})]})]})}},204:function(e,t,n){"use strict";var c=n(188),s=n.n(c)()().format("DD-MM-YYYY h:mm:ss a");t.a=s},269:function(e,t,n){},270:function(e,t,n){"use strict";var c=n(63),s=n(3),a={textAlign:"right",marginRight:"10px"},i={outline:"none",border:"none"};t.a=function(e){var t=e.children;return Object(s.jsx)(c.i,{className:"shadow-none",children:Object(s.jsx)(c.j,{style:a,children:Object(s.jsx)("div",{className:"btn btn-space text-nowrap shadow-none outline-none",style:i,children:t})})})}},274:function(e,t,n){}}]);
//# sourceMappingURL=63.526b3d9c.chunk.js.map