(this["webpackJsonpmain-bt5"]=this["webpackJsonpmain-bt5"]||[]).push([[64,181],{1137:function(e,t,n){},141:function(e,t,n){"use strict";var c=n(63),a=n(12),s=n(58),o=n(3);t.a=function(e){var t=Object(a.f)(),n=t.pathname.split("/")[1],r=t.pathname.split("/")[2];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h4",{children:e.heading}),Object(o.jsxs)(c.c,{children:[Object(o.jsx)(c.d,{to:"/",tag:s.b,className:"text-decoration-none",children:"Home"}),n?Object(o.jsx)(c.d,{active:!0,children:n}):"",r?Object(o.jsx)(c.d,{active:!0,children:r}):""]})]})}},143:function(e,t,n){"use strict";var c=n(158);n(181);t.a=function(e,t){return"success"===t?c.b.success(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"error"===t?c.b.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"info"===t?c.b.info(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"warning"===t?c.b.warning(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):Object(c.b)(e)}},146:function(e,t,n){"use strict";n.r(t);var c=n(63),a=(n(1),n(3));function s(e){var t=e.details,n=void 0===t?null:t,s=e.title;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(c.o,{tag:"h4",className:"border-bottom px-4 py-3 mb-0",children:Object(a.jsxs)(c.eb,{children:[Object(a.jsx)(c.s,{children:s}),n&&Object(a.jsxs)(c.s,{children:[Object(a.jsx)(c.eb,{children:Object(a.jsxs)("span",{style:{fontSize:"0.7em"},children:[" Creation: ",n&&n.created_by," ",n&&n.creation_date]})}),Object(a.jsx)(c.eb,{className:"d-flex",children:Object(a.jsxs)("span",{style:{fontSize:"0.7em"},children:[" Modified: ",n&&n.modified_by," ",n&&n.modification_date]})})]})]})})})}t.default=function(e){var t=e.children,n=e.title,o=e.subtitle,r=e.creationModificationDate;return Object(a.jsxs)(c.i,{className:"shadow-none",children:[Object(a.jsx)(s,{details:r,title:n}),Object(a.jsxs)(c.j,{className:"p-4",children:[Object(a.jsx)(c.m,{className:"text-muted mb-3",children:o||""}),Object(a.jsx)("div",{children:t})]})]})}},1545:function(e,t,n){"use strict";n.r(t);var c=n(11),a=n(2),s=n(9),o=n(27),r=n(1),i=n(12),d=n(63),j=(n(274),n(269),n(158)),u=n(141),l=n(146),b=n(143),h=n(7),O=n(3);function f(e){var t=e.staffeditdetails,n=e.handleInputs,c=Object(r.useState)([]),a=Object(o.a)(c,2),s=a[0],i=a[1];return Object(r.useEffect)((function(){h.a.get("/score/getCustomerName").then((function(e){i(e.data.data)})).catch((function(){Object(b.a)("Company not found","info")}))}),[]),Object(O.jsx)(d.A,{children:Object(O.jsx)(d.C,{children:Object(O.jsx)(l.default,{title:"Staff Details",creationModificationDate:t,children:Object(O.jsxs)(d.eb,{children:[Object(O.jsx)(d.s,{md:"3",children:Object(O.jsxs)(d.C,{children:[Object(O.jsxs)(d.H,{children:["Score ",Object(O.jsx)("span",{className:"required",children:" *"})]}),Object(O.jsx)(d.E,{type:"text",onChange:n,value:t&&t.correct_count,name:"score",disabled:!0})]})}),Object(O.jsx)(d.s,{md:"3",children:Object(O.jsxs)(d.C,{children:[Object(O.jsx)(d.H,{children:"Comments"}),Object(O.jsx)(d.E,{type:"text",onChange:n,value:t&&t.comments,name:"comments"})]})}),Object(O.jsx)(d.s,{md:"3",children:Object(O.jsxs)(d.C,{children:[Object(O.jsx)(d.H,{children:"Status"}),Object(O.jsxs)(d.E,{type:"select",name:"review_status",onChange:n,value:t&&t.review_status,children:[Object(O.jsx)("option",{value:"",children:"Please Select"}),Object(O.jsx)("option",{value:"Current",children:"Current"}),Object(O.jsx)("option",{value:"Archive",children:"Archive"})]})]})}),Object(O.jsx)(d.s,{md:"3",children:Object(O.jsxs)(d.C,{children:[Object(O.jsx)(d.H,{children:"Company"}),Object(O.jsxs)(d.E,{type:"select",name:"company_id",onChange:n,value:t&&t.company_id,children:[Object(O.jsx)("option",{value:"",children:"Please Select"}),s&&s.map((function(e){return Object(O.jsx)("option",{value:e.company_id,children:e.company_name},e.company_id)}))]})]})}),Object(O.jsx)(d.s,{md:"3",children:Object(O.jsxs)(d.C,{children:[Object(O.jsx)(d.H,{children:"Reviewer"}),Object(O.jsx)(d.E,{type:"text",onChange:n,value:t&&t.reviewer,name:"reviewer"})]})})]})})})})}var x=n(270);function m(e){var t=e.applyChanges,n=e.backToList,c=e.editStaffData,a=e.navigate;return Object(O.jsx)(d.A,{children:Object(O.jsx)(d.C,{children:Object(O.jsx)(x.a,{children:Object(O.jsxs)(d.eb,{children:[Object(O.jsx)(d.s,{children:Object(O.jsx)(d.e,{className:"shadow-none",color:"primary",onClick:function(){c(),setTimeout((function(){a("/ScoreManagement")}),1100)},children:"Save"})}),Object(O.jsx)(d.s,{children:Object(O.jsx)(d.e,{className:"shadow-none",color:"primary",onClick:function(){c(),t()},children:"Apply"})}),Object(O.jsx)(d.s,{children:Object(O.jsx)(d.e,{className:"shadow-none",color:"dark",onClick:function(){window.confirm("Are you sure you want to cancel  \n  \n You will lose any changes made")?a("/ScoreManagement"):t()},children:"Cancel"})}),Object(O.jsx)(d.s,{children:Object(O.jsx)(d.e,{className:"shadow-none",color:"dark",onClick:function(){n()},children:"Back to List"})})]})})})})}var g=n(203),p=n(58);function v(e){var t=e.toggle,n=e.tabs,c=Object(p.c)(),a=Object(o.a)(c,2),s=a[0],i=a[1];return Object(r.useEffect)((function(){t(s.get("tab"))}),[s.get("tab")]),Object(O.jsx)(d.R,{tabs:!0,children:null===n||void 0===n?void 0:n.map((function(e){return Object(O.jsx)(d.S,{children:Object(O.jsx)(d.T,{className:e.id===s.get("tab")?"active":"",onClick:function(){i({tab:e.id}),t(e.id)},children:e.name},e.id)},e.id)}))})}n(1137);var C=n(513),_=function(e){var t={labels:["Answered","Unanswered","Total Questions","Correct Answers"],datasets:[{label:"Counts",backgroundColor:["#36A2EB","#FF6384","#FFCE56","#4CAF50"],borderColor:"rgba(0,0,0,0.2)",borderWidth:3,hoverBackgroundColor:["#36A2EB","#FF6384","#FFCE56","#4CAF50"],hoverBorderColor:"rgba(0,0,0,0.2)",data:[e.answeredCount,e.unansweredCount,e.totalQuestion,e.correctCount]}]};return Object(O.jsxs)("div",{children:[Object(O.jsx)("h4",{children:"Score Summary"}),Object(O.jsx)(C.Doughnut,{data:t})]})},y=function(e){var t=e.categories,n={labels:t.map((function(e){return e.name})),datasets:[{label:"Answered",data:t.map((function(e){return e.answeredCount})),backgroundColor:"rgba(75, 192, 192, 0.6)"},{label:"Correct",data:t.map((function(e){return e.correctCount})),backgroundColor:"rgba(153, 102, 255, 0.6)"}]};return Object(O.jsx)("div",{children:Object(O.jsx)(C.Doughnut,{data:n,options:{legend:{display:!0,position:"bottom"}}})})};t.default=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],x=t[1],p=Object(r.useState)([]),C=Object(o.a)(p,2),w=C[0],k=C[1],S=Object(r.useState)([]),N=Object(o.a)(S,2),q=N[0],A=N[1],H=Object(r.useState)({}),E=Object(o.a)(H,2),F=E[0],Y=E[1],D=Object(r.useState)({}),M=Object(o.a)(D,2),B=M[0],P=M[1],I=Object(r.useState)(1),Q=Object(o.a)(I,2),T=Q[0],Z=Q[1],R=Object(i.h)().id,L=Object(i.g)(),U=Object(r.useState)("1"),z=Object(o.a)(U,2),J=z[0],W=z[1],X=function(){h.a.post("/score/getScoreManageById",{score_management_id:R}).then((function(e){x(e.data.data[0])})).catch((function(){Object(b.a)("Staff Data Not Found","info")}))},G=function(){h.a.post("/score/getScoreHistory",{score_management_id:R}).then((function(e){k(e.data.data)})).catch((function(){Object(b.a)("Score History Not Found","info")}))};Object(r.useEffect)((function(){X(),G(),h.a.get("/score/getQuestions",{params:{iso_code_id:n&&n.iso_code_id}}).then((function(e){var t=e.data.data.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{options:[e.option_1,e.option_2,e.option_3,e.option_4].filter(Boolean)})})),n=e.data.data.reduce((function(e,t){return e[t.question_id]=t.correct_answer,e}),{});A(t),P(n)})).catch((function(){Object(b.a)("Questions not found","info")})),h.a.post("/score/getScoreHistory",{score_management_id:R}).then((function(e){var t=e.data.data.reduce((function(e,t){return e[t.question_id]=t.answer,e}),{});Y(t)})).catch((function(){Object(b.a)("Previous answers not found","info")}))}),[R,n&&n.iso_code_id]);var K=function(e,t){Y((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(a.a)({},e,t))}))},V=5*T,$=V-5,ee=q.slice($,V),te=Math.ceil(q.length/5),ne=function(e){return Z(e)},ce=function(){var e=q.reduce((function(e,t){var n=t.category_title;return e[n]||(e[n]={name:n,answeredCount:0,correctCount:0}),e[n].answeredCount+=F[t.question_id]?1:0,e[n].correctCount+=B[t.question_id]===F[t.question_id]?1:0,e}),{});return Object.values(e)}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(u.a,{}),Object(O.jsx)(j.a,{}),Object(O.jsx)(m,{navigate:L,saveChanges:function(){L("/ScoreManagement"),window.location.reload()},applyChanges:function(){},backToList:function(){L("/ScoreManagement")},editStaffData:function(){n.modification_date=g.a,h.a.post("/score/editScore",n).then((function(){Object(b.a)("Record edited successfully","success"),X()})).catch((function(){Object(b.a)("Unable to edit record.","error")}))},id:R}),Object(O.jsx)(u.a,{heading:n&&n.score_management_id}),Object(O.jsx)(f,{staffeditdetails:n,handleInputs:function(e){x(Object(s.a)(Object(s.a)({},n),{},Object(a.a)({},e.target.name,e.target.value)))}}),Object(O.jsx)(d.A,{children:Object(O.jsx)(d.C,{children:Object(O.jsxs)(l.default,{title:"More Details",children:[Object(O.jsx)(j.a,{}),Object(O.jsx)(v,{toggle:function(e){W(e)},tabs:[{id:"1",name:"Score History"},{id:"2",name:"Score Summary"},{id:"3",name:"Category Wise Chart"}]}),Object(O.jsxs)(d.gb,{className:"p-4",activeTab:J,children:[Object(O.jsxs)(d.hb,{tabId:"1",children:[ee.map((function(e){return Object(O.jsx)(d.i,{className:"mb-3",children:Object(O.jsxs)(d.j,{children:[Object(O.jsx)(d.o,{tag:"h5",children:e.question}),Object(O.jsxs)(d.n,{children:["MCQ"===e.question_type&&Array.isArray(e.options)&&e.options.length>0&&e.options.map((function(t){return Object(O.jsx)(d.C,{check:!0,children:Object(O.jsxs)(d.H,{check:!0,children:[Object(O.jsx)(d.E,{type:"checkbox",checked:F[e.question_id]===t,onChange:function(){return K(e.question_id,t)}}),t]})},t)})),"Yes/No"===e.question_type&&Object(O.jsxs)("div",{children:[Object(O.jsx)(d.C,{check:!0,children:Object(O.jsxs)(d.H,{check:!0,children:[Object(O.jsx)(d.E,{type:"radio",checked:"Yes"===F[e.question_id],onChange:function(){return K(e.question_id,"Yes")}}),"Yes"]})}),Object(O.jsx)(d.C,{check:!0,children:Object(O.jsxs)(d.H,{check:!0,children:[Object(O.jsx)(d.E,{type:"radio",checked:"No"===F[e.question_id],onChange:function(){return K(e.question_id,"No")}}),"No"]})})]}),"Objective"===e.question_type&&Object(O.jsx)(d.C,{children:Object(O.jsx)(d.E,{type:"text",value:F[e.question_id]||"",onChange:function(t){return n=e.question_id,c=t.target.value,void Y((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(a.a)({},n,c))}));var n,c}})})]})]})},e.question_id)})),Object(O.jsx)(d.e,{color:"primary",onClick:function(){var e=[],t=[];Object.entries(F).forEach((function(n){var c=Object(o.a)(n,2),a=c[0],r=c[1],i=Number(a),d=w.find((function(e){return e.question_id===i}));d?d.answer!==r&&e.push(Object(s.a)(Object(s.a)({},d),{},{answer:r,modification_date:new Date})):t.push({score_management_id:R,question_id:i,answer:r,creation_date:new Date})}));var a=e.map((function(e){return h.a.post("/score/editScoreHistory",e)})),r=t.length>0?h.a.post("/score/addScoreHistory",{answers:t}):Promise.resolve();Promise.all([].concat(Object(c.a)(a),[r])).then((function(){Object(b.a)("Answers submitted successfully","success");var e=Object.keys(F).length,t=q.length-e,c=Object.entries(F).reduce((function(e,t){var n=Object(o.a)(t,2),c=n[0],a=n[1];return B[c]===a&&e++,e}),0);return h.a.post("/score/updateAnswerCounts",{score_management_id:R,iso_code_id:n&&n.iso_code_id,total_question:q.length,answered_count:e,unanswered_count:t,correct_count:c})})).then((function(){G()})).catch((function(){Object(b.a)("Unable to submit answers.","error")}))},children:"Submit Answers"}),Object(O.jsxs)(d.X,{"aria-label":"Page navigation example",className:"mt-4",children:[Object(O.jsx)(d.Y,{disabled:1===T,children:Object(O.jsx)(d.Z,{first:!0,onClick:function(){return ne(1)}})}),Object(O.jsx)(d.Y,{disabled:1===T,children:Object(O.jsx)(d.Z,{previous:!0,onClick:function(){return ne(T-1)}})}),Object(c.a)(Array(te).keys()).map((function(e){return Object(O.jsx)(d.Y,{active:T===e+1,children:Object(O.jsx)(d.Z,{onClick:function(){return ne(e+1)},children:e+1})},e+1)})),Object(O.jsx)(d.Y,{disabled:T===te,children:Object(O.jsx)(d.Z,{next:!0,onClick:function(){return ne(T+1)}})}),Object(O.jsx)(d.Y,{disabled:T===te,children:Object(O.jsx)(d.Z,{last:!0,onClick:function(){return ne(te)}})})]})]}),Object(O.jsx)(d.hb,{tabId:"2",children:Object(O.jsx)(_,{answeredCount:w.length,unansweredCount:q.length-w.length,totalQuestion:q.length,correctCount:w.filter((function(e){return B[e.question_id]===e.answer})).length})}),Object(O.jsx)(d.hb,{tabId:"3",children:Object(O.jsx)(y,{categories:ce})})]})]})})})]})}},203:function(e,t,n){"use strict";var c=n(186),a=n.n(c)()().format("DD-MM-YYYY h:mm:ss a");t.a=a},269:function(e,t,n){},270:function(e,t,n){"use strict";var c=n(63),a=n(3),s={textAlign:"right",marginRight:"10px"},o={outline:"none",border:"none"};t.a=function(e){var t=e.children;return Object(a.jsx)(c.i,{className:"shadow-none",children:Object(a.jsx)(c.j,{style:s,children:Object(a.jsx)("div",{className:"btn btn-space text-nowrap shadow-none outline-none",style:o,children:t})})})}},274:function(e,t,n){}}]);
//# sourceMappingURL=64.19684952.chunk.js.map