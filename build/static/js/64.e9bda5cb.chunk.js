(this["webpackJsonpmain-bt5"]=this["webpackJsonpmain-bt5"]||[]).push([[64,181],{1137:function(e,t,n){},141:function(e,t,n){"use strict";var c=n(63),s=n(12),a=n(58),o=n(2);t.a=function(e){var t=Object(s.g)(),n=t.pathname.split("/")[1],i=t.pathname.split("/")[2];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h4",{children:e.heading}),Object(o.jsxs)(c.c,{children:[Object(o.jsx)(c.d,{to:"/",tag:a.b,className:"text-decoration-none",children:"Home"}),n?Object(o.jsx)(c.d,{active:!0,children:n}):"",i?Object(o.jsx)(c.d,{active:!0,children:i}):""]})]})}},143:function(e,t,n){"use strict";var c=n(158);n(181);t.a=function(e,t){return"success"===t?c.b.success(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"error"===t?c.b.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"info"===t?c.b.info(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):"warning"===t?c.b.warning(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}):Object(c.b)(e)}},146:function(e,t,n){"use strict";n.r(t);var c=n(63),s=(n(1),n(2));function a(e){var t=e.details,n=void 0===t?null:t,a=e.title;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(c.o,{tag:"h4",className:"border-bottom px-4 py-3 mb-0",children:Object(s.jsxs)(c.eb,{children:[Object(s.jsx)(c.s,{children:a}),n&&Object(s.jsxs)(c.s,{children:[Object(s.jsx)(c.eb,{children:Object(s.jsxs)("span",{style:{fontSize:"0.7em"},children:[" Creation: ",n&&n.created_by," ",n&&n.creation_date]})}),Object(s.jsx)(c.eb,{className:"d-flex",children:Object(s.jsxs)("span",{style:{fontSize:"0.7em"},children:[" Modified: ",n&&n.modified_by," ",n&&n.modification_date]})})]})]})})})}t.default=function(e){var t=e.children,n=e.title,o=e.subtitle,i=e.creationModificationDate;return Object(s.jsxs)(c.i,{className:"shadow-none",children:[Object(s.jsx)(a,{details:i,title:n}),Object(s.jsxs)(c.j,{className:"p-4",children:[Object(s.jsx)(c.m,{className:"text-muted mb-3",children:o||""}),Object(s.jsx)("div",{children:t})]})]})}},1545:function(e,t,n){"use strict";n.r(t);var c=n(11),s=n(3),a=n(9),o=n(27),i=n(1),r=n(12),d=n(63),j=(n(274),n(269),n(158)),l=n(141),u=n(146),b=n(143),h=n(7),O=n(2);function f(e){var t=e.staffeditdetails,n=e.handleInputs,c=Object(i.useState)([]),s=Object(o.a)(c,2),a=s[0],r=s[1];return Object(i.useEffect)((function(){h.a.get("/score/getCustomerName").then((function(e){r(e.data.data)})).catch((function(){Object(b.a)("Company not found","info")}))}),[]),Object(O.jsx)(d.A,{children:Object(O.jsx)(d.C,{children:Object(O.jsx)(u.default,{title:"Staff Details",creationModificationDate:t,children:Object(O.jsxs)(d.eb,{children:[Object(O.jsx)(d.s,{md:"3",children:Object(O.jsxs)(d.C,{children:[Object(O.jsxs)(d.H,{children:["Score ",Object(O.jsx)("span",{className:"required",children:" *"})]}),Object(O.jsx)(d.E,{type:"text",onChange:n,value:t&&t.correct_count,name:"score",disabled:!0})]})}),Object(O.jsx)(d.s,{md:"3",children:Object(O.jsxs)(d.C,{children:[Object(O.jsx)(d.H,{children:"Comments"}),Object(O.jsx)(d.E,{type:"text",onChange:n,value:t&&t.comments,name:"comments"})]})}),Object(O.jsx)(d.s,{md:"3",children:Object(O.jsxs)(d.C,{children:[Object(O.jsx)(d.H,{children:"Status"}),Object(O.jsxs)(d.E,{type:"select",name:"review_status",onChange:n,value:t&&t.review_status,children:[Object(O.jsx)("option",{value:"",children:"Please Select"}),Object(O.jsx)("option",{value:"Current",children:"Current"}),Object(O.jsx)("option",{value:"Archive",children:"Archive"})]})]})}),Object(O.jsx)(d.s,{md:"3",children:Object(O.jsxs)(d.C,{children:[Object(O.jsxs)(d.H,{children:["Company",Object(O.jsx)("span",{className:"required",children:"*"})]}),Object(O.jsxs)(d.E,{type:"select",name:"company_id",onChange:n,value:t&&t.company_id,children:[Object(O.jsx)("option",{value:"",children:"Please Select"}),a&&a.map((function(e){return Object(O.jsx)("option",{value:e.company_id,children:e.company_name},e.company_id)}))]})]})}),Object(O.jsx)(d.s,{md:"3",children:Object(O.jsxs)(d.C,{children:[Object(O.jsx)(d.H,{children:"Reviewer"}),Object(O.jsx)(d.E,{type:"text",onChange:n,value:t&&t.reviewer,name:"reviewer"})]})})]})})})})}var x=n(270);function m(e){var t=e.applyChanges,n=e.backToList,c=e.editStaffData,s=e.navigate;return Object(O.jsx)(d.A,{children:Object(O.jsx)(d.C,{children:Object(O.jsx)(x.a,{children:Object(O.jsxs)(d.eb,{children:[Object(O.jsx)(d.s,{children:Object(O.jsx)(d.e,{className:"shadow-none",color:"primary",onClick:function(){c(),setTimeout((function(){s("/ScoreManagement")}),1100)},children:"Save"})}),Object(O.jsx)(d.s,{children:Object(O.jsx)(d.e,{className:"shadow-none",color:"primary",onClick:function(){c(),t()},children:"Apply"})}),Object(O.jsx)(d.s,{children:Object(O.jsx)(d.e,{className:"shadow-none",color:"dark",onClick:function(){window.confirm("Are you sure you want to cancel  \n  \n You will lose any changes made")?s("/ScoreManagement"):t()},children:"Cancel"})}),Object(O.jsx)(d.s,{children:Object(O.jsx)(d.e,{className:"shadow-none",color:"dark",onClick:function(){n()},children:"Back to List"})})]})})})})}var g=n(203),p=n(58);function v(e){var t=e.toggle,n=e.tabs,c=Object(p.c)(),s=Object(o.a)(c,2),a=s[0],r=s[1];return Object(i.useEffect)((function(){t(a.get("tab"))}),[a.get("tab")]),Object(O.jsx)(d.R,{tabs:!0,children:null===n||void 0===n?void 0:n.map((function(e){return Object(O.jsx)(d.S,{children:Object(O.jsx)(d.T,{className:e.id===a.get("tab")?"active":"",onClick:function(){r({tab:e.id}),t(e.id)},children:e.name},e.id)},e.id)}))})}n(1137);var C=n(66),_=n(513),y=function(e){var t={labels:["Answered","Unanswered","Total Questions","Correct Answers"],datasets:[{label:"Counts",backgroundColor:["#36A2EB","#FF6384","#FFCE56","#4CAF50"],borderColor:"rgba(0,0,0,0.2)",borderWidth:3,hoverBackgroundColor:["#36A2EB","#FF6384","#FFCE56","#4CAF50"],hoverBorderColor:"rgba(0,0,0,0.2)",data:[e.answeredCount,e.unansweredCount,e.totalQuestion,e.correctCount]}]};return Object(O.jsxs)("div",{children:[Object(O.jsx)("h4",{children:"Score Summary"}),Object(O.jsx)(_.Doughnut,{data:t})]})},w=function(e){var t=e.categories,n={labels:t.map((function(e){return e.name})),datasets:[{label:"Answered",data:t.map((function(e){return e.answeredCount})),backgroundColor:"rgba(75, 192, 192, 0.6)"},{label:"Correct",data:t.map((function(e){return e.correctCount})),backgroundColor:"rgba(153, 102, 255, 0.6)"}]};return Object(O.jsx)("div",{children:Object(O.jsx)(_.Doughnut,{data:n,options:{legend:{display:!0,position:"bottom"}}})})};t.default=function(){var e=Object(i.useState)({company_id:"",iso_code_id:""}),t=Object(o.a)(e,2),n=t[0],x=t[1],p=Object(i.useState)([]),_=Object(o.a)(p,2),k=_[0],S=_[1],N=Object(i.useState)([]),q=Object(o.a)(N,2),A=q[0],H=q[1],E=Object(i.useState)({}),F=Object(o.a)(E,2),Y=F[0],D=F[1],M=Object(i.useState)({}),B=Object(o.a)(M,2),P=B[0],I=B[1],Q=Object(i.useState)(1),T=Object(o.a)(Q,2),Z=T[0],R=T[1],L=Object(r.i)().id,U=Object(r.h)(),z=Object(i.useContext)(C.b).loggedInuser,J=Object(i.useState)("1"),W=Object(o.a)(J,2),X=W[0],G=W[1],K=function(){h.a.post("/score/getScoreManageById",{score_management_id:L}).then((function(e){x(e.data.data[0])})).catch((function(){Object(b.a)("Staff Data Not Found","info")}))};console.log("iso",n.iso_code_id),console.log("company",n.company_id);var V=function(){h.a.post("/score/getScoreHistory",{score_management_id:L}).then((function(e){S(e.data.data)})).catch((function(){Object(b.a)("Score History Not Found","info")}))};Object(i.useEffect)((function(){K(),V(),h.a.get("/score/getQuestions",{params:{iso_code_id:n&&n.iso_code_id}}).then((function(e){var t=e.data.data.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{options:[e.option_1,e.option_2,e.option_3,e.option_4].filter(Boolean)})})),n=e.data.data.reduce((function(e,t){return e[t.question_id]=t.correct_answer,e}),{});H(t),I(n)})).catch((function(){Object(b.a)("Questions not found","info")})),h.a.post("/score/getScoreHistory",{score_management_id:L}).then((function(e){var t=e.data.data.reduce((function(e,t){return e[t.question_id]=t.answer,e}),{});D(t)})).catch((function(){Object(b.a)("Previous answers not found","info")}))}),[L,n&&n.iso_code_id]);var $=function(e,t){D((function(n){return Object(a.a)(Object(a.a)({},n),{},Object(s.a)({},e,t))}))},ee=5*Z,te=ee-5,ne=A.slice(te,ee),ce=Math.ceil(A.length/5),se=function(e){return R(e)},ae=function(){var e=A.reduce((function(e,t){var n=t.category_title;return e[n]||(e[n]={name:n,answeredCount:0,correctCount:0}),e[n].answeredCount+=Y[t.question_id]?1:0,e[n].correctCount+=P[t.question_id]===Y[t.question_id]?1:0,e}),{});return Object.values(e)}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(l.a,{}),Object(O.jsx)(j.a,{}),Object(O.jsx)(m,{navigate:U,saveChanges:function(){U("/ScoreManagement"),window.location.reload()},applyChanges:function(){},backToList:function(){U("/ScoreManagement")},editStaffData:function(){""!==n.company_id&&""!==n.iso_code_id?(n.modification_date=g.a,n.modified_by=z.first_name,h.a.post("/score/editScore",n).then((function(){Object(b.a)("Record edited successfully","success"),K()})).catch((function(){Object(b.a)("Unable to edit record.","error")}))):Object(b.a)("Please fill all required fields","warning")},id:L}),Object(O.jsx)(l.a,{heading:n&&n.score_management_id}),Object(O.jsx)(f,{staffeditdetails:n,handleInputs:function(e){x(Object(a.a)(Object(a.a)({},n),{},Object(s.a)({},e.target.name,e.target.value)))}}),Object(O.jsx)(d.A,{children:Object(O.jsx)(d.C,{children:Object(O.jsxs)(u.default,{title:"More Details",children:[Object(O.jsx)(j.a,{}),Object(O.jsx)(v,{toggle:function(e){G(e)},tabs:[{id:"1",name:"Score History"},{id:"2",name:"Score Summary"},{id:"3",name:"Category Wise Chart"}]}),Object(O.jsxs)(d.gb,{className:"p-4",activeTab:X,children:[Object(O.jsxs)(d.hb,{tabId:"1",children:[ne.map((function(e){return Object(O.jsx)(d.i,{className:"mb-3",children:Object(O.jsxs)(d.j,{children:[Object(O.jsx)(d.o,{tag:"h5",children:e.question}),Object(O.jsxs)(d.n,{children:["MCQ"===e.question_type&&Array.isArray(e.options)&&e.options.length>0&&e.options.map((function(t){return Object(O.jsx)(d.C,{check:!0,children:Object(O.jsxs)(d.H,{check:!0,children:[Object(O.jsx)(d.E,{type:"checkbox",checked:Y[e.question_id]===t,onChange:function(){return $(e.question_id,t)}}),t]})},t)})),"Yes/No"===e.question_type&&Object(O.jsxs)("div",{children:[Object(O.jsx)(d.C,{check:!0,children:Object(O.jsxs)(d.H,{check:!0,children:[Object(O.jsx)(d.E,{type:"radio",checked:"Yes"===Y[e.question_id],onChange:function(){return $(e.question_id,"Yes")}}),"Yes"]})}),Object(O.jsx)(d.C,{check:!0,children:Object(O.jsxs)(d.H,{check:!0,children:[Object(O.jsx)(d.E,{type:"radio",checked:"No"===Y[e.question_id],onChange:function(){return $(e.question_id,"No")}}),"No"]})})]}),"Objective"===e.question_type&&Object(O.jsx)(d.C,{children:Object(O.jsx)(d.E,{type:"text",value:Y[e.question_id]||"",onChange:function(t){return n=e.question_id,c=t.target.value,void D((function(e){return Object(a.a)(Object(a.a)({},e),{},Object(s.a)({},n,c))}));var n,c}})})]})]})},e.question_id)})),Object(O.jsx)(d.e,{color:"primary",onClick:function(){var e=[],t=[];Object.entries(Y).forEach((function(n){var c=Object(o.a)(n,2),s=c[0],i=c[1],r=Number(s),d=k.find((function(e){return e.question_id===r}));d?d.answer!==i&&e.push(Object(a.a)(Object(a.a)({},d),{},{answer:i,modification_date:new Date})):t.push({score_management_id:L,question_id:r,answer:i,creation_date:new Date})}));var s=e.map((function(e){return h.a.post("/score/editScoreHistory",e)})),i=t.length>0?h.a.post("/score/addScoreHistory",{answers:t}):Promise.resolve();Promise.all([].concat(Object(c.a)(s),[i])).then((function(){Object(b.a)("Answers submitted successfully","success");var e=Object.keys(Y).length,t=A.length-e,c=Object.entries(Y).reduce((function(e,t){var n=Object(o.a)(t,2),c=n[0],s=n[1];return P[c]===s&&e++,e}),0);return h.a.post("/score/updateAnswerCounts",{score_management_id:L,iso_code_id:n&&n.iso_code_id,total_question:A.length,answered_count:e,unanswered_count:t,correct_count:c})})).then((function(){V()})).catch((function(){Object(b.a)("Unable to submit answers.","error")}))},children:"Submit Answers"}),Object(O.jsxs)(d.X,{"aria-label":"Page navigation example",className:"mt-4",children:[Object(O.jsx)(d.Y,{disabled:1===Z,children:Object(O.jsx)(d.Z,{first:!0,onClick:function(){return se(1)}})}),Object(O.jsx)(d.Y,{disabled:1===Z,children:Object(O.jsx)(d.Z,{previous:!0,onClick:function(){return se(Z-1)}})}),Object(c.a)(Array(ce).keys()).map((function(e){return Object(O.jsx)(d.Y,{active:Z===e+1,children:Object(O.jsx)(d.Z,{onClick:function(){return se(e+1)},children:e+1})},e+1)})),Object(O.jsx)(d.Y,{disabled:Z===ce,children:Object(O.jsx)(d.Z,{next:!0,onClick:function(){return se(Z+1)}})}),Object(O.jsx)(d.Y,{disabled:Z===ce,children:Object(O.jsx)(d.Z,{last:!0,onClick:function(){return se(ce)}})})]})]}),Object(O.jsx)(d.hb,{tabId:"2",children:Object(O.jsx)(y,{answeredCount:k.length,unansweredCount:A.length-k.length,totalQuestion:A.length,correctCount:k.filter((function(e){return P[e.question_id]===e.answer})).length})}),Object(O.jsx)(d.hb,{tabId:"3",children:Object(O.jsx)(w,{categories:ae})})]})]})})})]})}},203:function(e,t,n){"use strict";var c=n(186),s=n.n(c)()().format("DD-MM-YYYY h:mm:ss a");t.a=s},269:function(e,t,n){},270:function(e,t,n){"use strict";var c=n(63),s=n(2),a={textAlign:"right",marginRight:"10px"},o={outline:"none",border:"none"};t.a=function(e){var t=e.children;return Object(s.jsx)(c.i,{className:"shadow-none",children:Object(s.jsx)(c.j,{style:a,children:Object(s.jsx)("div",{className:"btn btn-space text-nowrap shadow-none outline-none",style:o,children:t})})})}},274:function(e,t,n){}}]);
//# sourceMappingURL=64.e9bda5cb.chunk.js.map